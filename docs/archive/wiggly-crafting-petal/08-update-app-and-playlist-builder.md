# Update App.tsx and PlaylistBuilder Component

## Files to Modify/Create
- `web/frontend/src/App.tsx` (modify - complete replacement)
- `web/frontend/src/pages/PlaylistBuilder.tsx` (modify)
- `web/frontend/src/routeTree.gen.ts` (create stub file)

## Implementation Details

### 1. Create Route Tree Stub File

Create `web/frontend/src/routeTree.gen.ts` with the following content:

```typescript
// This file is auto-generated by @tanstack/router-plugin
// DO NOT EDIT - it will be replaced when dev server starts
export const routeTree = {} as any
```

**Note**: This stub prevents TypeScript errors before the dev server generates the real file. Add to `.gitignore` if not already present.

### 2. Replace App.tsx with TanStack Router Setup

**Replace entire file content:**

```typescript
import { QueryClient, QueryClientProvider } from '@tanstack/react-query'
import { createRouter, RouterProvider } from '@tanstack/react-router'
import { routeTree } from './routeTree.gen'

const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      retry: 1,
      staleTime: 5 * 60 * 1000,
    },
    mutations: {
      retry: 1,
    },
  },
})

const router = createRouter({
  routeTree,
  context: {
    queryClient,
  },
})

declare module '@tanstack/react-router' {
  interface Register {
    router: typeof router
  }
}

function App() {
  return (
    <QueryClientProvider client={queryClient}>
      <RouterProvider router={router} />
    </QueryClientProvider>
  )
}

export default App
```

**Note**: The `routeTree.gen.ts` file will be automatically generated by the TanStack Router plugin.

### 2. Update PlaylistBuilder Component

Change the component interface and remove playlist lookup logic:

**Before:**
```typescript
// Old hash-based approach or no props
export function PlaylistBuilder() {
  const [selectedPlaylistId, setSelectedPlaylistId] = useState<number | null>(null)
  // ... playlist selection logic
}
```

**After:**
```typescript
interface PlaylistBuilderProps {
  playlistId: number  // Changed from playlistName: string
}

export function PlaylistBuilder({ playlistId }: PlaylistBuilderProps) {
  // Use playlistId directly - no need for lookup
  const {
    session,
    addTrack,
    skipTrack,
    filters,
    updateFilters,
    startSession,
    isAddingTrack,
    isSkippingTrack,
  } = useBuilderSession(playlistId)

  // ... rest of existing component logic
}
```

### Changes Required
1. **Add props interface**: Define `PlaylistBuilderProps` with `playlistId: number`
2. **Remove embedded selection**: Delete the embedded `PlaylistSelection` component (around lines 219-234)
3. **Remove playlist lookup**: Delete any logic that looks up playlist from name
4. **Use playlistId directly**: Pass `playlistId` prop directly to `useBuilderSession`

## Acceptance Criteria

### App.tsx
- [ ] Imports `routeTree` from auto-generated file
- [ ] Creates router with `routeTree` and `queryClient` context
- [ ] Uses `RouterProvider` instead of conditional rendering
- [ ] Type declaration for router module added

### PlaylistBuilder.tsx
- [ ] Accepts `playlistId` prop (number)
- [ ] No longer contains embedded PlaylistSelection component
- [ ] No playlist lookup logic present
- [ ] Passes `playlistId` to `useBuilderSession`
- [ ] Rest of component logic unchanged

## Verification
1. Start dev server: `npm run dev` in `web/frontend/`
2. Check `routeTree.gen.ts` was auto-generated
3. Navigate to `/` - should show ComparisonView
4. Navigate to `/playlist-builder` - should show selection page
5. Click a playlist - should show builder with session controls

## Dependencies
- Task 07 (dynamic route must exist to pass playlistId)
- All route files must be created before `routeTree.gen.ts` generates
